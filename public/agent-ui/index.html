<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BambiSleep Agent Control Center</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="css/agent-ui.css">
    <style>
        /* Control Center Styles */
        .control-center {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .control-header {
            text-align: center;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, rgba(255, 192, 203, 0.1), rgba(0, 255, 255, 0.1));
            padding: 2rem;
            border-radius: 1rem;            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }
        
        .control-title {
            background: linear-gradient(45deg, #ff69b4, #00ffff);
            -webkit-background-clip: text;
            -moz-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        
        .control-subtitle {
            color: #b0b0b0;
            font-size: 1.3rem;
            margin-bottom: 1rem;
        }
        
        .global-status {
            font-size: 1.1rem;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
            color: #00ff00;
            display: inline-block;
        }
        
        .agent-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .agent-card {
            background: rgba(30, 30, 40, 0.8);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid rgba(255, 192, 203, 0.2);
            transition: all 0.3s ease;
        }
        
        .agent-card:hover {
            border-color: rgba(255, 192, 203, 0.5);
            transform: translateY(-2px);
        }
        
        .agent-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        
        .agent-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #ff69b4;
        }
        
        .agent-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ff00;
            animation: pulse 2s infinite;
        }
        
        .status-error {
            background: #ff4444;
        }
        
        .status-loading {
            background: #ffaa00;
        }
        
        .agent-description {
            color: #b0b0b0;
            margin-bottom: 1rem;
            line-height: 1.4;
        }
        
        .agent-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            background: linear-gradient(45deg, #ff69b4, #00ffff);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            transform: scale(1.05);
        }
        
        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .content-detector {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, rgba(255, 192, 203, 0.1), rgba(0, 255, 255, 0.1));
            border: 1px solid rgba(0, 255, 255, 0.3);
        }
        
        .detector-status {
            font-family: 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.5);
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            color: #00ff00;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes loading {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #ff69b4;
            border-radius: 50%;
            border-top-color: transparent;
            animation: loading 1s linear infinite;
        }
    </style>
</head>
<body>
    <div class="control-center">
        <!-- Control Center Header -->
        <header class="control-header">
            <h1 class="control-title">BambiSleep Agent Control Center</h1>
            <p class="control-subtitle">Unified interface for discovery, feed management, and analytics</p>
            <div class="global-status" id="globalStatus">
                ‚úÖ All agents initialized and ready
            </div>
        </header>

        <!-- Agent Grid -->
        <div class="agent-grid">
            <!-- Discovery Agent Card -->
            <div class="agent-card">
                <div class="agent-header">
                    <div class="agent-title">üîç Discovery Agent</div>
                    <div class="agent-status">
                        <div class="status-indicator" id="discoveryIndicator"></div>
                        <span id="discoveryStatus">üåô BambiSleep Discovery Agent</span>
                    </div>
                </div>
                <div class="agent-description">
                    Advanced content discovery with pattern matching and AI detection algorithms. 
                    Scans platforms for BambiSleep content with 15%+ confidence threshold.
                </div>
                <div class="agent-controls">
                    <button class="control-btn" onclick="startDiscovery()">Start Discovery</button>
                    <button class="control-btn" onclick="viewDiscoveryStats()">View Stats</button>
                    <button class="control-btn" onclick="configureDiscovery()">Configure</button>
                </div>
            </div>

            <!-- Feed Manager Card -->
            <div class="agent-card">
                <div class="agent-header">
                    <div class="agent-title">üåô Feed Manager</div>
                    <div class="agent-status">
                        <div class="status-indicator" id="feedIndicator"></div>
                        <span id="feedStatus">‚úÖ Feed management active</span>
                    </div>
                </div>
                <div class="agent-description">
                    Automated content moderation, validation, and quality scoring. 
                    Manages feed curation with intelligent filtering and approval workflows.
                </div>
                <div class="agent-controls">
                    <button class="control-btn" onclick="manageFeed()">Manage Feed</button>
                    <button class="control-btn" onclick="viewModerationQueue()">Moderation Queue</button>
                    <button class="control-btn" onclick="feedSettings()">Settings</button>
                </div>
            </div>

            <!-- Intelligence Hub Card -->
            <div class="agent-card">
                <div class="agent-header">
                    <div class="agent-title">üìä Intelligence Hub</div>
                    <div class="agent-status">
                        <div class="status-indicator" id="statsIndicator"></div>
                        <span id="statsStatus">üìä Analytics engine running</span>
                    </div>
                </div>
                <div class="agent-description">
                    Real-time analytics, trend analysis, and community insights. 
                    Provides comprehensive statistics and predictive analytics for content trends.
                </div>
                <div class="agent-controls">
                    <button class="control-btn" onclick="viewAnalytics()">View Analytics</button>
                    <button class="control-btn" onclick="generateReport()">Generate Report</button>
                    <button class="control-btn" onclick="trendAnalysis()">Trend Analysis</button>
                </div>
            </div>

            <!-- Content Detector Card -->
            <div class="agent-card content-detector">
                <div class="agent-header">
                    <div class="agent-title">üß† BambiSleep Content Detector</div>
                    <div class="agent-status">
                        <div class="status-indicator" id="detectorIndicator"></div>
                        <span id="detectorStatus">Initializing AI detection algorithms...</span>
                    </div>
                </div>
                <div class="agent-description">
                    Universal content detection system with multi-factor analysis. 
                    Uses pattern matching, metadata analysis, and AI algorithms for content classification.
                </div>
                <div class="detector-status" id="detectorConsole">
                    > Initializing Universal Content Detector...
                    > Loading pattern recognition models...
                    > Calibrating confidence thresholds...
                    > AI detection algorithms ready
                </div>
                <div class="agent-controls">
                    <button class="control-btn" onclick="testDetector()">Test Detector</button>
                    <button class="control-btn" onclick="calibrateDetector()">Calibrate</button>
                    <button class="control-btn" onclick="detectorLogs()">View Logs</button>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div style="text-align: center; margin-top: 2rem;">
            <button class="control-btn" onclick="refreshAllAgents()" style="font-size: 1.1rem; padding: 1rem 2rem;">
                üîÑ Refresh All Agents
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/bambisleep-discovery-agent.js"></script>
    <script src="/js/bambisleep-feed-agent.js"></script>
    <script src="/js/bambisleep-stats-agent.js"></script>
    <script>
        // Control Center JavaScript
        class BambiSleepControlCenter {
            constructor() {
                this.agents = {
                    discovery: null,
                    feed: null,
                    stats: null
                };
                this.initializeControlCenter();
            }

            async initializeControlCenter() {
                console.log('üöÄ Initializing BambiSleep Control Center...');
                
                // Simulate agent initialization
                await this.initializeAgents();
                
                // Setup status monitoring
                this.setupStatusMonitoring();
                
                console.log('‚úÖ Control Center ready');
            }

            async initializeAgents() {
                // Initialize Discovery Agent
                try {
                    if (typeof BambisleepDiscoveryAgent !== 'undefined') {
                        this.agents.discovery = new BambisleepDiscoveryAgent();
                        this.updateAgentStatus('discovery', 'ready', 'üåô BambiSleep Discovery Agent');
                    } else {
                        throw new Error('Discovery agent not available');
                    }
                } catch (error) {
                    this.updateAgentStatus('discovery', 'error', '‚ùå Discovery agent failed');
                }

                // Initialize Feed Agent
                try {
                    if (typeof BambisleepFeedAgent !== 'undefined') {
                        this.agents.feed = new BambisleepFeedAgent();
                        this.updateAgentStatus('feed', 'ready', '‚úÖ Feed management active');
                    } else {
                        throw new Error('Feed agent not available');
                    }
                } catch (error) {
                    this.updateAgentStatus('feed', 'error', '‚ùå Feed agent failed');
                }

                // Initialize Stats Agent
                try {
                    if (typeof BambisleepStatsAgent !== 'undefined') {
                        this.agents.stats = new BambisleepStatsAgent();
                        this.updateAgentStatus('stats', 'ready', 'üìä Analytics engine running');
                    } else {
                        throw new Error('Stats agent not available');
                    }
                } catch (error) {
                    this.updateAgentStatus('stats', 'error', '‚ùå Analytics engine failed');
                }

                // Initialize Content Detector
                setTimeout(() => {
                    this.updateDetectorStatus('ready', 'üß† AI detection algorithms ready');
                    this.updateDetectorConsole([
                        '> Universal Content Detector initialized',
                        '> Pattern recognition: ACTIVE',
                        '> Confidence threshold: 15%',
                        '> Ready for content analysis'
                    ]);
                }, 3000);
            }

            updateAgentStatus(agent, status, message) {
                const indicator = document.getElementById(`${agent}Indicator`);
                const statusText = document.getElementById(`${agent}Status`);
                
                if (indicator) {
                    indicator.className = `status-indicator ${status === 'error' ? 'status-error' : status === 'loading' ? 'status-loading' : ''}`;
                }
                
                if (statusText) {
                    statusText.textContent = message;
                }
            }

            updateDetectorStatus(status, message) {
                const indicator = document.getElementById('detectorIndicator');
                const statusText = document.getElementById('detectorStatus');
                
                if (indicator) {
                    indicator.className = `status-indicator ${status === 'error' ? 'status-error' : status === 'loading' ? 'status-loading' : ''}`;
                }
                
                if (statusText) {
                    statusText.textContent = message;
                }
            }

            updateDetectorConsole(messages) {
                const console = document.getElementById('detectorConsole');
                if (console) {
                    console.innerHTML = messages.map(msg => `<div>${msg}</div>`).join('');
                }
            }

            setupStatusMonitoring() {
                // Real-time status updates
                setInterval(() => {
                    this.checkAgentHealth();
                }, 30000); // Check every 30 seconds
            }

            checkAgentHealth() {
                Object.keys(this.agents).forEach(agentName => {
                    const agent = this.agents[agentName];
                    if (agent && typeof agent.isRunning === 'function') {
                        const isRunning = agent.isRunning();
                        if (!isRunning) {
                            this.updateAgentStatus(agentName, 'error', `‚ùå ${agentName} agent disconnected`);
                        }
                    }
                });
            }
        }

        // Control Center Functions
        function startDiscovery() {
            console.log('üîç Starting discovery...');
            // Implementation would trigger discovery
        }

        function viewDiscoveryStats() {
            console.log('üìä Viewing discovery stats...');
            // Implementation would show stats
        }

        function configureDiscovery() {
            console.log('‚öôÔ∏è Configuring discovery...');
            // Implementation would show config
        }

        function manageFeed() {
            console.log('üåô Managing feed...');
            // Implementation would open feed manager
        }

        function viewModerationQueue() {
            console.log('üìã Viewing moderation queue...');
            // Implementation would show queue
        }

        function feedSettings() {
            console.log('‚öôÔ∏è Feed settings...');
            // Implementation would show settings
        }

        function viewAnalytics() {
            console.log('üìä Viewing analytics...');
            // Implementation would show analytics
        }

        function generateReport() {
            console.log('üìÑ Generating report...');
            // Implementation would generate report
        }

        function trendAnalysis() {
            console.log('üìà Trend analysis...');
            // Implementation would show trends
        }

        function testDetector() {
            console.log('üß™ Testing detector...');
            // Implementation would test detector
        }

        function calibrateDetector() {
            console.log('üéØ Calibrating detector...');
            // Implementation would calibrate
        }

        function detectorLogs() {
            console.log('üìã Viewing detector logs...');
            // Implementation would show logs
        }

        function refreshAllAgents() {
            console.log('üîÑ Refreshing all agents...');
            location.reload();
        }

        // Initialize Control Center
        document.addEventListener('DOMContentLoaded', () => {
            window.controlCenter = new BambiSleepControlCenter();
        });
    </script>
</body>
</html>
