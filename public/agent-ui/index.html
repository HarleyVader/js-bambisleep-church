<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BambiSleep Agent UI - Interactive Dashboard</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="css/agent-ui.css">
    <style>
        /* Inline critical styles for instant loading */
        .agent-ui-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .unified-header {
            text-align: center;
            margin-bottom: 2rem;
        }
          .agent-title {
            background: linear-gradient(45deg, var(--color-primary-magenta), var(--color-primary-cyan));
            -webkit-background-clip: text;
            -moz-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .agent-subtitle {
            color: var(--color-text-secondary);
            font-size: 1.2rem;
        }
          .agent-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            background: rgba(var(--color-bg-secondary-rgb), 0.6);
            border-radius: 1rem;
            padding: 0.5rem;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }
        
        .tab-button {
            padding: 0.75rem 1.5rem;
            border: none;
            background: transparent;
            color: var(--color-text-secondary);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .tab-button.active {
            background: linear-gradient(45deg, var(--color-primary-magenta), var(--color-primary-cyan));
            color: white;
        }
        
        .tab-button:hover:not(.active) {
            background: rgba(var(--color-primary-cyan-rgb), 0.1);
            color: var(--color-primary-cyan);
        }
        
        .agent-panel {
            display: none;
            background: rgba(var(--color-bg-secondary-rgb), 0.9);
            border: 1px solid var(--color-primary-magenta);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .agent-panel.active {
            display: block;
        }
        
        .agent-status {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1rem;
            background: rgba(var(--color-bg-primary-rgb), 0.6);
            border-radius: 0.5rem;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--color-primary-green);
            box-shadow: 0 0 10px var(--color-primary-green);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .loading-state {
            text-align: center;
            padding: 2rem;
            color: var(--color-text-secondary);
        }
        
        .spinner {
            border: 2px solid rgba(var(--color-primary-cyan-rgb), 0.1);
            border-left: 2px solid var(--color-primary-cyan);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 0.5rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .agent-tabs {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header Navigation (reuse existing) -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="/" class="nav-brand">
                    <span class="brand-icon">🌙</span>
                    <span class="brand-text">BambiSleep Church</span>
                </a>
                <div class="nav-links">
                    <a href="/" class="nav-link">Home</a>
                    <a href="/feed" class="nav-link">Feed</a>
                    <a href="/submit" class="nav-link">Submit</a>
                    <a href="/stats" class="nav-link">Stats</a>
                    <a href="/agent-ui" class="nav-link active">Agent UI</a>
                    <a href="/help" class="nav-link">Help</a>
                </div>
            </nav>
        </div>
    </header>

    <main class="agent-ui-container">
        <!-- Unified Header -->
        <div class="unified-header">
            <h1 class="agent-title">🤖 BambiSleep Agent Control Center</h1>
            <p class="agent-subtitle">Unified interface for discovery, feed management, and analytics</p>
        </div>

        <!-- Agent Status Bar -->
        <div class="agent-status" id="globalAgentStatus">
            <div class="status-indicator" id="globalStatusIndicator"></div>
            <span id="globalStatusText">Initializing agents...</span>
            <div class="loading-state" id="agentLoadingState">
                <div class="spinner"></div>
                Loading agent systems...
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="agent-tabs" id="agentTabs">
            <button class="tab-button active" data-panel="discovery">
                🔍 Discovery Agent
            </button>
            <button class="tab-button" data-panel="feed">
                🌙 Feed Manager
            </button>
            <button class="tab-button" data-panel="stats">
                📊 Intelligence Hub
            </button>
        </div>

        <!-- Discovery Agent Panel -->
        <div class="agent-panel active" id="discoveryPanel">
            <div class="agent-status">
                <div class="status-indicator" id="discoveryStatus"></div>
                <h3>🌙 BambiSleep Discovery Agent</h3>
                <span id="discoveryStatusText">Loading...</span>
            </div>
            
            <!-- Content Detection Status -->
            <div class="detection-status" id="detectionStatusCard">
                <div class="bambisleep-detector">
                    <div class="detector-icon">🧠</div>
                    <div class="detector-info">
                        <div class="detector-title">BambiSleep Content Detector</div>
                        <div class="detector-confidence" id="detectionConfidence">Initializing AI detection algorithms...</div>
                    </div>
                </div>
            </div>

            <!-- URL Analysis Form -->
            <form id="discoveryForm" class="discovery-form">
                <div class="form-group">
                    <label for="discoveryUrls">🔍 URLs to Analyze for BambiSleep Content</label>
                    <textarea id="discoveryUrls" name="discoveryUrls" class="form-input" rows="5" 
                              placeholder="Enter URLs to analyze for BambiSleep content (one per line)..."></textarea>
                </div>
                
                <div class="content-type-selection">
                    <label class="section-label">Content Types to Detect:</label>
                    <div class="checkbox-grid">
                        <label class="checkbox-label">
                            <input type="checkbox" id="detectScripts" checked> 📜 Scripts & Text
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="detectAudio" checked> 🎵 Audio Files
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="detectVideos" checked> 🎬 Videos
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="detectImages" checked> 🖼️ Images
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="detectSubliminals" checked> 🌀 Subliminals
                        </label>
                    </div>
                </div>
                
                <button type="submit" id="startDiscoveryButton" class="submit-button">
                    🚀 Start BambiSleep Discovery
                </button>
            </form>

            <!-- Progress Section -->
            <div id="discoveryProgress" class="progress-section" style="display: none;">
                <div class="progress-bar">
                    <div id="discoveryProgressBar" class="progress-fill"></div>
                    <div class="progress-text-overlay" id="discoveryProgressText">Starting...</div>
                </div>
                <div class="crawl-log" id="discoveryLog"></div>
            </div>

            <!-- Results Section -->
            <div id="discoveryResults" class="results-section" style="display: none;">
                <h3>🌙 Discovered BambiSleep Content</h3>
                <div id="discoveryResultsGrid" class="results-grid"></div>
            </div>
        </div>

        <!-- Feed Manager Panel -->
        <div class="agent-panel" id="feedPanel">
            <div class="agent-status">
                <div class="status-indicator" id="feedStatus"></div>
                <h3>🌙 BambiSleep Feed Manager</h3>
                <span id="feedStatusText">Loading...</span>
            </div>

            <!-- Feed Statistics -->
            <div class="feed-stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="feedTotalContent">-</div>
                    <div class="stat-label">Total Content</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="feedValidated">-</div>
                    <div class="stat-label">BambiSleep Verified</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="feedRemoved">-</div>
                    <div class="stat-label">Non-Relevant Removed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="feedRelevanceRate">-</div>
                    <div class="stat-label">Relevance Rate</div>
                </div>
            </div>

            <!-- Content Submission -->
            <form id="feedSubmissionForm" class="content-form">
                <div class="form-group">
                    <label for="contentUrl">Content URL</label>
                    <input type="url" id="contentUrl" name="url" class="form-input" 
                           placeholder="https://example.com/bambi-content" required>
                </div>
                <div class="form-group">
                    <label for="contentTitle">Title</label>
                    <input type="text" id="contentTitle" name="title" class="form-input" 
                           placeholder="Content title...">
                </div>
                <div class="form-group">
                    <label for="contentDescription">Description</label>
                    <textarea id="contentDescription" name="description" class="form-input" rows="3" 
                              placeholder="Content description..."></textarea>
                </div>
                <button type="submit" id="submitContentButton" class="submit-button">
                    📝 Submit Content
                </button>
            </form>

            <!-- Live Feed Display -->
            <div id="liveFeedContainer" class="live-feed">
                <div class="loading-state">
                    <div class="spinner"></div>
                    Loading live feed...
                </div>
            </div>
        </div>

        <!-- Intelligence Hub Panel -->
        <div class="agent-panel" id="statsPanel">
            <div class="agent-status">
                <div class="status-indicator" id="statsStatus"></div>
                <h3>🧠 BambiSleep Intelligence Hub</h3>
                <span id="statsStatusText">Loading...</span>
            </div>

            <!-- Real-time Statistics Grid -->
            <div class="stats-dashboard">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalKnowledgeItems">-</div>
                        <div class="stat-label">Knowledge Base Items</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="activeUsers">-</div>
                        <div class="stat-label">Active Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="contentValidated">-</div>
                        <div class="stat-label">Content Validated</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="a2aMessages">-</div>
                        <div class="stat-label">A2A Messages</div>
                    </div>
                </div>

                <!-- Intelligence Insights -->
                <div class="insights-section">
                    <h3>💡 AI Intelligence Insights</h3>
                    <div class="insight-tabs">
                        <button class="insight-tab active" data-question="who">👥 Who</button>
                        <button class="insight-tab" data-question="what">📝 What</button>
                        <button class="insight-tab" data-question="where">📍 Where</button>
                        <button class="insight-tab" data-question="when">⏰ When</button>
                        <button class="insight-tab" data-question="why">🤔 Why</button>
                        <button class="insight-tab" data-question="how">⚙️ How</button>
                    </div>
                    <div id="insightContent" class="insight-content">
                        <div class="loading-state">
                            <div class="spinner"></div>
                            Generating insights...
                        </div>
                    </div>
                </div>

                <!-- Agent Activity Log -->
                <div class="activity-log">
                    <h3>🤖 Agent Activity Log</h3>
                    <div id="agentActivityLog" class="log-container"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer (reuse existing) -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 BambiSleep Church. Agent UI Interface.</p>
        </div>
    </footer>    <!-- Scripts - Load in order -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/bambisleep-discovery-agent.js"></script>
    <script src="/js/bambisleep-feed-agent.js"></script>
    <script src="/js/bambisleep-stats-agent.js"></script>
    <script src="js/agent-ui.js"></script>
</body>
</html>
